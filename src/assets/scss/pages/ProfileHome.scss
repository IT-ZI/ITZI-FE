/* src/assets/scss/pages/ProfileHome.scss */
.profile-home {
  /* 중앙정렬 기준(footer/nav와 동일) */
  max-width: 1180px;   /* 사이드바(280) + gap(20) + 메인(880) */
  margin: 0 auto;      /* 가운데 정렬 */

  .panel.benefits { margin-bottom: 92px; }

  /* ───── 페이지 외곽 여백(피그마 고정값) ───── */
  --gap-left: 161px;
  --gap-right: 149px;
  --gap-top-from-nav: 34px;

  /* 제목 라인 동기화(캘린더/문의함 동일 라인) */
  --title-h: 22px;
  --title-gap: 10px;
  --sync-nudge: 0px;

  /* 진행 중 제휴/혜택 카드 공통 변수 */
  --benefit-card-w: 267.92px;
  --benefit-card-h: 167px;
  --benefit-thumb-h: 86.57px;

  background: #F6F6FF;

  /* 외곽 패딩: 사이드바=좌측 161, 문의함=우측 149 라인을 자동 보장 */
  padding-top: var(--gap-top-from-nav);
  padding-left: var(--gap-left);
  padding-right: var(--gap-right);

  /* 페이지 레이아웃: 좌측 레일(사이드바) + 메인 */
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 20px;

  /* 공통 패널 스타일 */
  .panel {
    background: #fff;
    border: 1.5px solid #D9DAEC;
    border-radius: 15px;
  }

  /* ───── 좌측: 사이드바 ───── */
  .profile-sidebar { width: 226px; align-self: start; }

  /* ───── 우측: 메인 ───── */
  .col-main { display: flex; flex-direction: column; gap: 20px; min-width: 0; }

  /* 상단: 캘린더 + 문의함 */
  .row-top {
    display: grid;
    grid-template-columns: auto 391px;
    gap: 34px;
    align-items: start;
  }

  /* 캘린더 */
  .cal-wrap { width: 456px; }
  .cal-title {
    margin: 0 0 var(--title-gap) 4px;
    font-weight: 700;
    font-size: 14px;
    color: #3A3B4D;
    line-height: var(--title-h);
    transform: translateY(var(--sync-nudge));
  }
  .calendar.cal-compact {
    --box-w: 456px; --box-h: 370px; --pad: 10px;
    --head-h: 40px; --head-gap: 6px;
    --dow-h: 24px; --date-h: 18px; --bar-gap: 2px; --level-gap: 12px;

    width: var(--box-w);
    height: var(--box-h);
    position: relative;
    border-radius: 15px;
    border: 1.5px solid #D9DAEC;
    background: #fff;
    padding: var(--pad);
  }

  /* ── 문의함 컬럼 ── */
  .inquiries { width: 391px; }
  .inquiries .col-title,
  .inquiry-title {
    margin: 0 0 var(--title-gap) 0;
    font-size: 14px; font-weight: 700; color: #3A3B4D;
    line-height: var(--title-h); transform: translateY(var(--sync-nudge));
  }

  /* ✅ 카드 컨테이너: 391×164 고정 */
  .inquiry-card {
    margin-top: 15px; width: 391px; height: 164px;
    border-radius: 15px; border: 1.5px solid #D9DAEC; background: #FFFFFF;
    box-sizing: border-box; display: flex; flex-direction: column; overflow: hidden;
  }

  /* ✅ 헤더 박스 */
  .inquiry-head {
    width: 354px; height: 36px; margin: 15px auto 0; padding: 10px 15px; box-sizing: border-box;
    border-radius: 5px; border: 1px solid #C2C3D9; background: #F6F6FF;
    display: flex; align-items: center; justify-content: space-between; gap: 12px; flex: 0 0 auto;
  }
  .inquiry-head .left, .inquiry-head .right { display: flex; align-items: center; gap: 8px; min-width: 0; }

  /* 아이콘/텍스트 */
  .inquiry-head .avatar { width: 20px; height: 20px; border-radius: 50%; flex: 0 0 20px; object-fit: cover; }
  .inquiry-head .name {
    font-size: 13px; font-weight: 600; color: #3A3B4D;
    white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 170px;
  }
  .inquiry-head .detail { font-size: 12px; color: #6B6C80; white-space: nowrap; }

  /* 버튼(자세히 보기) */
  .inq-more-btn{
    background: none; border: 0; padding: 0; cursor: pointer;
    display: flex; align-items: center; gap: 8px; line-height: 1; white-space: nowrap;
  }
  .inq-more-btn .icon{ width: 14.07px; height: 11.25px; object-fit: contain; display: block; }

  /* ✅ 목록 영역 */
  .inquiry-body{
    padding: 8px 12px 10px; flex: 1 1 auto; min-height: 0; overflow: auto;
    &::-webkit-scrollbar{ width: 6px; }
    &::-webkit-scrollbar-thumb{ background:#E7E8F2; border-radius:6px; }
    &::-webkit-scrollbar-track{ background:transparent; }
  }
  .inq-list{ margin: 0; padding: 0; list-style: none; display: flex; flex-direction: column; gap: 10px; }

  .inq-row{
    display: flex; align-items: center; justify-content: space-between;
    height: 36px; padding: 0 12px;
    border: 1px solid #C2C3D9; border-radius: 8px; background: #F6F6FF;
    box-shadow: 0 1px 0 rgba(0,0,0,0.02);
  }
  .inq-row:hover{ background:#EEF0FF; }
  .inq-row .row-left{ display:flex; align-items:center; gap:10px; min-width:0; }
  .inq-row .plane{ width:20px; height:20px; display:block; }
  .inq-row .text{ font-size: 14px; color:#3A3B4D; overflow: hidden; text-overflow: ellipsis; }
  .inq-row::after { content: none !important; }
  .inquiry-body .empty{ font-size:12px; color:#6B6C80; text-align:center; padding:8px 0; }

  /* ================================
     진행 중 제휴/혜택
     ================================ */
  .panel.benefits {
    width: 100% !important; /* 컬럼 폭에 맞춤 */
    max-width: 879px;
    border-radius: 15px;
    border: 1.5px solid #D9DAEC;
    padding: 14px;
    background: #fff;

    .benefits-title {
      margin: 0 0 10px 2px;
      font-weight: 700; font-size: 14px; line-height: 22px; color: #3A3B4D;
    }

    .progress-panel {
      width: 100%; height: 288px;
      overflow-y: auto; overflow-x: hidden; padding-right: 4px;
      &::-webkit-scrollbar { width: 6px; }
      &::-webkit-scrollbar-thumb { background:#D9DAEC; border-radius: 6px; }
      scrollbar-width: thin; scrollbar-color: #D9DAEC transparent;
    }

    .progress-grid {
      display: grid;
      grid-template-columns: repeat(3, var(--benefit-card-w));
      grid-auto-rows: var(--benefit-card-h);
      gap: 10px;
    }
  }
}

/* 강제 고정 스타일 */
.profile-home .panel.benefits {
  width: 100% !important;
  max-width: 879px;
  height: 288px !important;
  border: 1.5px solid #D9DAEC !important;
  border-radius: 15px !important;
  background: #FFFFFF !important;
  padding: 14px !important;
  box-sizing: border-box;

  .benefits-title {
    margin: 0 0 10px 2px !important;
    font-weight: 700; font-size: 15px; line-height: 22px; color: #000000;
  }

  .progress-panel {
    height: calc(288px - 24px - 10px) !important;
    overflow-y: auto !important; overflow-x: hidden !important; padding-right: 4px;
    &::-webkit-scrollbar { width: 6px; }
    &::-webkit-scrollbar-thumb { background: #D9DAEC; border-radius: 6px; }
    scrollbar-width: thin; scrollbar-color: #D9DAEC transparent;
  }

  .progress-grid {
    display: grid !important;
    grid-template-columns: repeat(3, 267.9153747559px) !important;
    grid-auto-rows: 167.1672515869px !important;
    gap: 10px !important;
  }

  .benefit-card {
    width: 267.92px !important; height: 167.17px !important;
    border-radius: 11.19px !important; border: 0.75px solid #D9DAEC !important;
    background: #FFFFFF !important; overflow: hidden !important;
    display: flex !important; flex-direction: column !important;

    .thumb {
      position: relative; width: 100% !important; height: 86.575px !important;
      img { width: 100% !important; height: 100% !important; object-fit: cover !important; display: block; }
      .badge.dday {
        position: absolute; left: 10px; top: 8px; padding: 2px 8px; font-size: 12px; line-height: 16px;
        border-radius: 999px; background: #EBECFF; border: 1px solid #C2C3D9; color: #3A3B4D;
        &.hot { background: #FFE9E9; border-color: #FFB8B8; color: #FF5555; }
      }
    }

    /* ✅ 뱃지 기준 컨테이너 설정 */
    .body { 
      flex: 1; padding: 8px 10px 10px; display: flex; flex-direction: column; gap: 6px;
      position: relative; /* ← 우측 상단 스크랩 뱃지의 기준 */
    }

    /* ✅ 우상단 스크랩 뱃지: 숫자 + 아이콘 (절대배치, 항상 보임) */
    .scrap-badge {
      position: absolute; top: 6px; right: 8px;
      display: inline-flex; align-items: center; gap: 6px;
      z-index: 2; /* 다른 요소 위로 */
      visibility: visible; opacity: 1;
    }
    .scrap-count {
      font-size: 12px; font-weight: 700; line-height: 1;
      color: #5CCB9A; /* 기본 초록 */
      &.on { color: #1FC37D; } /* 스크랩 상태일 때 진한 초록 */
    }
    /* 뱃지 안의 버튼 */
    .scrap-badge .scrap {
      width: 20px; height: 20px;
      display: inline-flex; align-items: center; justify-content: center;
      border: 0; background: none; padding: 0; cursor: pointer;
      &:disabled { cursor: default; opacity: .6; }
      img { width: 16px; height: 16px; display: block; }
    }

    .title-row {
      display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 8px;
      .title { margin: 0; font-size: 11.19px; font-weight: 700; color: #3A3B4D; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      /* 기존 .scrap 버튼 스타일은 유지(다른 화면 재사용 대비), 실제 표시/위치는 위의 .scrap-badge가 담당 */
      .scrap { width: 20px; height: 20px; display: inline-flex; align-items: center; justify-content: center; border: 0; background: none; padding: 0; cursor: pointer;
               &:disabled { cursor: default; opacity: .6; } img { width: 16px; height: 16px; display: block; } }
    }

    .meta {
      list-style: none !important; padding: 0 !important; margin: 0 !important;
      display: flex; flex-direction: column; gap: 0px !important; height: 37.87px !important;
      li { align-items: center; font-size: 8.96px; color: #000000;
        .label { font-weight: 700; } .sep { margin: 0 6px; color: #000000; }
        .value { flex: 1; min-width: 0; overflow: hidden !important; white-space: nowrap; text-overflow: ellipsis; }
      }
    }
  }
}

/* ==== 스크랩 뱃지 전역 오버라이드 ==== */
.benefit-card { position: relative; } /* 혹시 부모 기준이 필요할 때 대비 */
.benefit-card .body { position: relative; }

.benefit-card .scrap-badge {
  position: absolute;
  top: 6px; right: 8px;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  z-index: 9;
  visibility: visible !important;
  opacity: 1 !important;
}

.benefit-card .scrap-badge .scrap {
  width: 20px; height: 20px;
  border: 0; background: transparent; padding: 0;
  display: inline-flex; align-items: center; justify-content: center;
}
.benefit-card .scrap-badge .scrap img { width: 16px; height: 16px; display: block; }

.benefit-card .scrap-count {
  font-size: 12px; font-weight: 700; line-height: 1;
  color: #5CCB9A;
}
.benefit-card .scrap-count.on { color: #1FC37D; }
